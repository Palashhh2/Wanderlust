<%layout('/layouts/boilerplate')%></layout>
    <!-- <h3>All the Listings</h3> -->
    <!--<form method="get" action="/listings/new">
        <button>Create new Listing</button>
    </form> -->
    <style>
        #filters{
            display: flex;
            flex-wrap: wrap;
            align-items:center;
        }

        .filter{
            text-align: center;
            margin-top: 1rem;
            margin-right: 2rem;
            opacity: 0.7;
        }

        .filter:hover{
        opacity: 1;
        cursor: pointer;
        }
        
        .filter p{
            font-size: 0.7rem;
        }

        .tax-info{
            display: none;
        }

        .tax-toggle{
            border: 1px solid black;
            border-radius:1rem;
            height: 2.5rem;
            padding:1rem;
            margin-left: 2rem;
            display: flex;
            font-size: 0.9rem;
            align-items: center;
        }
    </style>

    <div id="filters">
        <div class="filter">
            <div><i class="fa-solid fa-fire"></i></div>
            <p>Trending</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-key"></i></div>
            <p>New</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-archway"></i></div>
            <p>Monument</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-tree-city"></i></div>
            <p>Tree House</p>
        </div>
        
        <div class="filter">
            <div><i class="fa-solid fa-igloo"></i></div>
            <p>Arctic</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-campground"></i></div>
            <p>Camping</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-place-of-worship"></i></div>
            <p>Religious</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-tents"></i></div>
            <p>Tents</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-place-of-worship"></i></div>
            <p>Religious</p>
        </div>

        <div class="filter">
            <div><i class="fa-solid fa-person-hiking"></i></div>
            <p>Adventure</p>
        </div>

        <div class="tax-toggle">
            <div class="form-check-reverse form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
                <label class="form-check-label" for="switchCheckDefault">Display total after taxes</label>
            </div>
        </div>

    </div> 
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-2"><!--without .row grid system will not work-->
        <!--we added a custum class row so that all the card lie is the row, try first commenting this div and see the diffrence-->

    <% for (let listing of allListings){%> 
            
        <a href="/listings/<%=listing._id%>" class="listing-link"><!--we are keeping our card in this anchor tag because it will redirect us to the show route-->

        <div class="card col listing-card"><!--we added a class col so that the card will be there in colmuns-->

            <img 
            src="<%=listing.image.url%>" 
            class="card-img-top" 
            alt="listing_image" 
            style="height: 18rem;"><!--we gave inline styling setting its height-->

            <div class="card-img-overlay"></div><!--to add the overlay effect on the card we place this div class overlay just after the img and then perform styling-->

            <div class="card-body">
             <p class="card-text">
               <b><%=listing.title%></b>
                <br>
                &#8377;<%=listing.price.toLocaleString("en-IN")%> /night
                <i class="tax-info">&nbsp;&nbsp; +18% GST</i>
             </p>
            </div>
        </div> 
        
        </a>
    <%}%>

    </div>

    <!-- <ul>
            <li>
                <a href="/listings/<=listing._id%>"><=listing.title%></a>
            </li>            
    </ul> -->

    <!--THIS SCRIPT WAS WRITTEN FORTHE GST INCLUDE IF WE WANT WE CAN WRITE SCRIPT IN SEPERATE JS FILEAND THEN IMPORT IT -->
<script>
    let taxSwitch = document.getElementById("switchCheckDefault");
    taxSwitch.addEventListener("click",()=>{
    let taxInfo = document.getElementsByClassName("tax-info");     
    for (info of taxInfo){
        if(info.style.display!="inline"){
            info.style.display="inline";
        }else{
            info.style.display="none";
        }
    }
    });
   
</script>